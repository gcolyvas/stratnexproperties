import React, { useState } from 'react';
import Reveal from './ui/Reveal';
import Input from './ui/Input';
import Select from './ui/Select';

const SellerSection: React.FC = () => {
  const [success, setSuccess] = useState(false);
  const [isSubmitting, setIsSubmitting] = useState(false);

  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault();
    setIsSubmitting(true);
    
    // We use the form data directly since we've mapped the name attributes to Entry IDs
    const form = e.target as HTMLFormElement;
    const googleFormData = new FormData(form);

    try {
      await fetch("https://docs.google.com/forms/d/e/1FAIpQLSctDMtVuxQq-XZocBJsREJe050AwgMDuUiv8DvJsWjQg1VEAQ/formResponse", {
        method: "POST",
        mode: "no-cors",
        body: googleFormData
      });
      setSuccess(true);
    } catch (error) {
      console.error("Submission Error:", error);
      alert("There was a connection error. Please try again.");
    } finally {
      setIsSubmitting(false);
    }
  };

  return (
    <section id="seller" className="py-32 bg-navy text-white relative overflow-hidden">
      {/* Abstract Background Shapes */}
      <div className="absolute top-0 left-0 w-full h-full opacity-10 pointer-events-none">
          <div className="absolute top-[-20%] left-[-10%] w-[50%] h-[50%] rounded-full bg-slate blur-[100px]"></div>
          <div className="absolute bottom-[-20%] right-[-10%] w-[50%] h-[50%] rounded-full bg-slate blur-[100px]"></div>
      </div>

      <div className="container mx-auto px-6 max-w-5xl relative z-10">
        <div className="grid grid-cols-1 lg:grid-cols-2 gap-20 items-center">
          
          <Reveal>
            <h2 className="text-4xl md:text-6xl mb-8 tracking-tight font-serif">Seller Mandate</h2>
            <p className="text-slate text-lg font-light mb-12 leading-relaxed">
              List your premium asset with our private client desk. We offer direct access to high-net-worth individuals, diplomatic missions, and multinational corporations.
            </p>
            <ul className="space-y-6">
              {[
                "Dar es Salaam & Zanzibar Portfolio",
                "Residential & Commercial Assets",
                "Confidential Listings Available"
              ].map((item, i) => (
                <li key={i} className="flex items-center text-sm font-bold uppercase tracking-luxury text-white">
                  <span className="w-1.5 h-1.5 bg-slate mr-4 rounded-none"></span>
                  {item}
                </li>
              ))}
            </ul>
          </Reveal>
          
          <Reveal delay={200}>
            <div className="bg-white p-10 md:p-12 relative overflow-hidden border border-white/10 shadow-2xl">
              {!success ? (
                <>
                  <h3 className="text-2xl font-serif text-navy mb-8 text-center">Asset Details</h3>
                  
                  <form onSubmit={handleSubmit} className="space-y-6">
                    <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                      <Input label="Owner / Entity Name" name="entry.2093557451" required />
                      <Input label="Phone Number" name="entry.174063630" type="tel" required />
                    </div>
                    
                    <Select 
                       label="Asset Type" 
                       name="entry.1706680453"
                       options={[
                         "Stand-alone Villa", 
                         "Apartment Building", 
                         "Commercial Office", 
                         "Industrial Plot/Warehouse", 
                         "Mining Rights (PL/ML)",
                         "Development Land"
                       ]} 
                       required
                    />
                    
                    <Input label="Location" name="entry.2064103135" required />
                    <Input label="Description & Valuation" name="entry.1717367355" required />

                    <button 
                        type="submit" 
                        disabled={isSubmitting}
                        className="w-full mt-6 py-4 border border-navy text-navy font-bold uppercase tracking-luxury text-xs hover:bg-navy hover:text-white transition-colors duration-500 disabled:opacity-50"
                    >
                        {isSubmitting ? 'Submitting...' : 'Submit for Valuation'}
                    </button>
                  </form>
                </>
              ) : (
                <div className="absolute inset-0 bg-white flex flex-col items-center justify-center p-10 text-center animate-fade-in">
                    <div className="w-16 h-16 border border-navy text-navy flex items-center justify-center mb-6">
                        <svg className="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M5 13l4 4L19 7"></path></svg>
                    </div>
                    <h3 className="text-2xl font-serif text-navy mb-4">Details Submitted</h3>
                    <p className="text-slate text-sm leading-relaxed">Our acquisition team will review your property details and reach out for preliminary due diligence.</p>
                </div>
              )}
            </div>
          </Reveal>
        </div>
      </div>
    </section>
  );
};

export default SellerSection;
